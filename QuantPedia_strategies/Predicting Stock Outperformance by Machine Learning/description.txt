This paper addresses the challenge of selecting stocks that will outperform in the future. Traditional prediction models have struggled to accurately estimate returns, but researchers have turned to machine learning algorithms with promising results. The authors propose a random forest classification model that ranks stocks based on their likelihood of outperformance. The model shows significant alphas of up to 22% per year and is robust to various tests. The authors also construct mean-variance portfolios using outperformance probabilities and find higher returns and lower risk. The paper emphasizes the role of technical indicators and suggests that unobserved risk factors contribute to the observed abnormal return.

Fundamental reason
The fundamental reason for the functionality of the proposed stock ranking approach using a random forest classification model is to address the challenge faced by asset managers in picking stocks that outperform in the future. Traditional prediction models based on the Efficient Market Hypothesis have shown limited success in accurately predicting future stock price movements. However, with the advancements in computational power, researchers have turned to machine learning algorithms, such as support vector machines, deep learning, and ensemble models, which have demonstrated promising results in predicting short-term stock price trends. The proposed random forest classification model leverages the capabilities of machine learning algorithms to capture non-linear patterns and identify anomalies in stock behavior, potentially leading to improved stock ranking and selection. By calculating outperformance probabilities based on the classification results of multiple decision trees, the model aims to provide risk-averse investors with portfolios that contain less volatile stocks while still achieving significant outperformance. The functionality of this approach is supported by the evaluation of performance using a dataset of liquid stocks, which demonstrates highly significant alphas and the ability to construct mean-variance portfolios that outperform in out-of-sample tests. Overall, the functionality of the proposed model contributes to the literature by offering an alternative approach to stock ranking and selection, leveraging machine learning techniques to identify potential outperforming stocks and improve investment strategies.

Simple trading strategy
Data
The author collected international stock market data from Refinitiv’s Datastream, spanning the period from 1990 to 2018. The dataset includes stocks from 68 countries, and the technical indicators used in the analysis are calculated based on up to one year of previous stock price data. To ensure the reliability of the data, the author focused on sufficiently liquid stocks and excluded the top and bottom 0.1% of stocks with the highest and lowest returns each month. The final dataset consists of 18,973 stocks across 67 countries, although not all of them meet the liquidity criteria throughout the entire investment horizon.
Table 1 provides an overview of the stocks in the dataset, revealing that a large portion of the stocks are traded in the US, China, and Japan, but there are also stocks from smaller countries like Bahrain and Serbia. The average market capitalization of the included stocks is $3.74 billion.

Model Construction
1. Model Construction. The author constructed used model to address the weaknesses of portfolios based on absolute stock return forecasts, especially in the context of machine learning. Regression models tend to favor small, illiquid, and volatile stocks during training, which results in portfolios with higher volatility, larger drawdowns, and increased kurtosis. To mitigate these issues, he proposes ranking stocks based on their outperformance probability and compare this approach to a random forest regressor that predicts future returns. In his analysis, he presents performance metrics such as mean, volatility, maximum drawdown, skewness, and kurtosis for portfolios based on non-refitted models from 2004 to 2018. The results show that a classification-based investment is less biased towards smaller stocks, with a higher average market capitalization compared to regression-based investments. The classification-based portfolios also exhibit lower volatility, maximum drawdown, and kurtosis, indicating less risk. Despite lower risk, the classification-based portfolio achieves a higher return of 18.92%, approximately 3.5% higher than the regression-based portfolio, resulting in a Sharpe ratio of 1.95. The author compares the performance of his baseline model using a rolling window approach to assess the impact of refitting the model over time. Surprisingly, refitting the model leads to a reduction in the Sharpe ratio for both the classification-based and regression-based portfolios. This contradicts the expectation that more recent data is usually considered more relevant. The author proposes two potential explanations for this phenomenon. First, the signal-to-noise ratio may have decreased over time, causing the model to misinterpret noise as patterns. Second, there may be different predictive patterns in crisis and non-crisis periods, and a model trained on crisis periods may yield lower out-of-sample prediction power. To test these hypotheses, the researchers construct two different classification models: one trained on earlier data (1990-2003) and another trained on more recent data (2004-mid 2011). The performance evaluation from mid-2011 to 2018 shows a substantial drop in performance for the model trained solely on more recent data. A long-short portfolio based on early data achieves a Sharpe ratio of 1.67, while the portfolio following the more recent model achieves a significantly lower Sharpe ratio of 0.82. The exclusion of the financial crisis years from the training set (Late-No FC) leads to an increase in prediction power, with the Sharpe ratio rising from 0.82 to 1.23. However, a model trained solely on the financial crisis years (Late-FC) generates an inferior Sharpe ratio of 0.4. As a robustness check, the author also trains and evaluates annual models, which further confirm the lower out-of-sample prediction power for models trained on more recent or crisis years. He suggests that incorporating additional variables representing the overall market state, such as stock market index volatility and macroeconomic variables, could potentially mitigate this issue. He concludes that more recent data is not necessarily more valuable in terms of predictive pattern identification. Therefore, he decides to train a non-refitted classification model on stock market data from 1990-2003 and evaluate it on data from 2004 to 2018.
2. Parameter optimization. The author optimizes the random forest model by adjusting its parameters. He divides the training set into two subsets for fitting and evaluation. The important parameters are the maximum features per node and the number of decision trees. He finds that too strong a restriction on tree depth reduces performance, while increasing depth leads to overfitting. He set the maximum tree depth to 23, balancing performance and overfitting. Restricting features per node doesn’t improve performance. Determining the forest size is crucial. He plots the Out-of-Bag (OOB) error rate for different forest sizes and finds convergence around 2000 estimators. He set the forest size accordingly.
Overall, he optimizes the random forest by adjusting tree depth, features per node, and forest size to maximize performance without overfitting.

Portfolio Evaluation
In portfolio evaluation, the focus is on the actual return difference for correct and wrong classifications rather than just accuracy. The return spread, which measures the deviation between the average stock return and the mean return of similar class probabilities, is calculated. Positive return spreads are observed for stocks with a high probability of outperformance, while strongly negative spreads are seen for stocks with low probabilities.
To evaluate the model’s performance more extensively, model-based long, short, and long-short portfolios are constructed. The average returns of the top portfolios are significantly higher than those of the bottom portfolios, with a difference of around 41 percentage points annually for a portfolio of equally-weighted stocks. Portfolios with high outperformance probabilities have lower volatility and drawdown, indicating resilience during crises. Sharpe ratios are also higher for these portfolios. Considering tail risk, an adjusted version of the Sharpe ratio is used, revealing that the outperformance of the top portfolios diminishes. Investing in the lowest ranked stocks yields negative returns, higher volatility, and negative Sharpe ratios. Combining long and short investments in an equally weighted long-short portfolio leads to extraordinarily high profits, with positive skewness and low kurtosis. Value-weighted portfolios show similar patterns, but with reduced exposure to tail risk. When testing with large market capitalization stocks only, similar results are obtained, indicating that the identified patterns are present in highly liquid firms. To address selection bias, equally and value-weighted portfolios are compared with randomly constructed portfolios, and no evidence of bias is found.

Hedge for stocks during bear markets
Yes - If investors simultaneously short the stocks with the lowest ranking, they may effectively hedge against tail risk.